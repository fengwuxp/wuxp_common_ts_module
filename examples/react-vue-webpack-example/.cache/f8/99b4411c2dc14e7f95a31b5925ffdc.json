{"id":"U2u5","dependencies":[{"name":"E:\\workspace\\idea\\github\\wuxp_common_ts_module\\examples\\react-vue-webpack-example\\tsconfig.json","includedInParent":true,"mtime":1573390954835},{"name":"E:\\workspace\\idea\\github\\wuxp_common_ts_module\\examples\\react-vue-webpack-example\\.babelrc.js","includedInParent":true,"mtime":1573392323492},{"name":"E:\\workspace\\idea\\github\\wuxp_common_ts_module\\examples\\react-vue-webpack-example\\package.json","includedInParent":true,"mtime":1573391647444},{"name":"E:\\workspace\\idea\\github\\wuxp_common_ts_module\\examples\\react-vue-webpack-example\\.browserslistrc","includedInParent":true,"mtime":1563441700551},{"name":"./SafetySandboxWrapper","loc":{"line":1,"column":38},"parent":"E:\\workspace\\idea\\github\\wuxp_common_ts_module\\examples\\react-vue-webpack-example\\src\\scanbox\\SandboxRunGlobalObject.ts","resolved":"E:\\workspace\\idea\\github\\wuxp_common_ts_module\\examples\\react-vue-webpack-example\\src\\scanbox\\SafetySandboxWrapper.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.runSandboxEvnTest=void 0;var e=require(\"./SafetySandboxWrapper\"),n=function(){var n=(0,e.generateSandboxObject)(window);fetch(\"http://192.168.80.1:9999/js/test.js\").then(function(e){return e.text()}).then(function(e){new Function(\"window\",\"globalThis\",\"\".concat(e))(n,n),console.log(\"real window ___A___\",window.___A___),console.log(\"sandbox window ___A___\",n.___A___)})};exports.runSandboxEvnTest=n;"},"sourceMaps":{"js":{"mappings":[{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":0}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":13}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":20}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":35}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":43}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":56}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":57}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":64}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":68}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":76}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":99}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":101}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":105}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":115}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":13},"generated":{"line":1,"column":141}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":33},"generated":{"line":1,"column":143}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":9,"column":10},"generated":{"line":1,"column":154}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":9,"column":10},"generated":{"line":1,"column":158}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":9,"column":38},"generated":{"line":1,"column":161}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":9,"column":60},"generated":{"line":1,"column":163}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":9,"column":60},"generated":{"line":1,"column":165}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":9,"column":60},"generated":{"line":1,"column":188}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":196}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":12,"column":10},"generated":{"line":1,"column":202}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":12,"column":49},"generated":{"line":1,"column":241}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":12,"column":54},"generated":{"line":1,"column":246}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":12,"column":55},"generated":{"line":1,"column":255}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":1,"column":258}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":1,"column":265}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":13,"column":24},"generated":{"line":1,"column":267}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":14,"column":7},"generated":{"line":1,"column":276}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":14,"column":12},"generated":{"line":1,"column":281}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":14,"column":13},"generated":{"line":1,"column":290}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":1,"column":293}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":1,"column":297}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":22},"generated":{"line":1,"column":306}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":32},"generated":{"line":1,"column":315}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":49},"generated":{"line":1,"column":328}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":49},"generated":{"line":1,"column":331}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":49},"generated":{"line":1,"column":338}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":1,"column":341}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":57},"generated":{"line":1,"column":342}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":17,"column":84},"generated":{"line":1,"column":344}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":347}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":20,"column":16},"generated":{"line":1,"column":355}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":20,"column":20},"generated":{"line":1,"column":359}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":20,"column":43},"generated":{"line":1,"column":381}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":20,"column":49},"generated":{"line":1,"column":388}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":397}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":22,"column":16},"generated":{"line":1,"column":405}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":1,"column":409}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":22,"column":46},"generated":{"line":1,"column":434}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":22,"column":71},"generated":{"line":1,"column":436}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":448}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":456}},{"source":"scanbox/SandboxRunGlobalObject.ts","name":null,"original":{"line":6,"column":7},"generated":{"line":1,"column":474}}],"sources":{"scanbox/SandboxRunGlobalObject.ts":"import {generateSandboxObject, runScriptWithSandbox} from \"./SafetySandboxWrapper\";\r\n\r\n/**\r\n * 沙箱环境测试\r\n */\r\nexport const runSandboxEvnTest = function () {\r\n\r\n    // 获取一个安全的window沙箱对象\r\n    const safetyWindowObjectSandbox = generateSandboxObject(window);\r\n\r\n    //加载远程的js\r\n    fetch(\"http://192.168.80.1:9999/js/test.js\").then((response) => {\r\n        return response.text()\r\n    }).then((data) => {\r\n\r\n        //使用沙箱对象运行，保证全局对象不被污染\r\n        (new Function(\"window\", \"globalThis\", `${data}`)(safetyWindowObjectSandbox, safetyWindowObjectSandbox));\r\n\r\n        // 真正的全局对象并没有被改变  window[\"___A___\"] = undefined\r\n        console.log(\"real window ___A___\", window[\"___A___\"]);\r\n        // 沙箱对象  safetyWindowObjectSandbox[\"___A___\"] = 1\r\n        console.log(\"sandbox window ___A___\", safetyWindowObjectSandbox[\"___A___\"]);\r\n\r\n        // runScriptWithSandbox(data);\r\n    })\r\n};\r\n\r\n"},"lineCount":null}},"error":null,"hash":"a9dca539caf373fd37ae97348305b88d","cacheData":{"env":{}}}